{"version":3,"sources":["app/initialize.js"],"names":["main","div","document","querySelectorAll","button","querySelector","addEventListener","className","hiddenP","showP","e","keyCode","span","email","value","re","test","disabled","preventDefault","$","ajax","method","url","data","mail","done","msg","console","log","alert","p","createElement","texte","createTextNode","appendChild","body","append","i","length"],"mappings":"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","file":"public/app.js","sourcesContent":["function main() {\r\n    var div = document.querySelectorAll('div')[1];\r\n    var button = document.querySelector('button');\r\n\r\n    // Lorsqu'on clique sur le bouton\r\n    button.addEventListener('click', function () {\r\n        if(div.className == 'hidden'){\r\n            document.querySelectorAll('div')[0].className = \"open\";\r\n            hiddenP();\r\n            div.className = 'show';\r\n\r\n        }else{\r\n            showP();\r\n            document.querySelectorAll('div')[0].className = \"closed\";\r\n            div.className = 'hidden';\r\n        }\r\n    });\r\n\r\n\r\n    // Transformer le bouton lorsque le popin est ouvert\r\n    document.addEventListener('click', function () {\r\n        if(div.className == 'show'){\r\n            button.className = 'btnclosed';\r\n        }else{\r\n            button.className = 'btn';\r\n        }\r\n    });\r\n\r\n    // Remettre le bouton à son état d'origine si l'on appuie sur la touche \"Echap\" alors que le popin est ouvert\r\n    document.addEventListener('keydown', function(e){\r\n        if(e.keyCode == 27){\r\n            button.className = 'btn';\r\n        }else{\r\n            button.className = 'btnclosed';\r\n        }\r\n    });\r\n\r\n    // Fonctionnement du bouton permettant de fermer le popin\r\n    var span = document.querySelector('span');\r\n    span.addEventListener('click', function(){\r\n        showP();\r\n        document.querySelectorAll('div')[0].className = \"close\";\r\n        div.className = 'hidden';\r\n    });\r\n\r\n    // Si l'on appuie sur la touche \"Echap\", fermer le popin\r\n    document.addEventListener('keydown', function(e){\r\n        if(e.keyCode == 27){\r\n            showP();\r\n            document.querySelectorAll('div')[0].className = \"close\";\r\n            div.className = 'hidden';\r\n        }\r\n    });\r\n\r\n\r\n    // Activation du bouton type submit lorsque le mail remplit les conditions\r\n    document.querySelectorAll('input')[0].addEventListener(\"keypress\", function(){\r\n        var email = document.querySelectorAll('input')[0].value;\r\n        var re = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{1,4})+$/;\r\n        if(re.test(email)){\r\n            document.querySelectorAll('input')[1].disabled = \"\";\r\n            document.querySelectorAll('input')[1].className = \"vbtn\"\r\n        }else{\r\n            document.querySelectorAll('input')[1].disabled = \"disabled\";\r\n            document.querySelectorAll('input')[1].className = \"vbtndbld\"\r\n        }\r\n    });\r\n\r\n    // Affichage du message de validation lorsque l'email est sauvegardé\r\n    document.addEventListener('submit', function(e) {\r\n        e.preventDefault();\r\n        $.ajax({\r\n                method: \"POST\",\r\n                url: \"script.php\",\r\n                data: {mail: document.querySelector('#mail').value}\r\n          })\r\n        .done(function(msg) {\r\n                        console.log(msg)\r\n                        if (msg == 'ok') {\r\n                            alert(\"Ok\");\r\n                        } else {\r\n                            alert(\"No\");\r\n                            console.log(\"no\")\r\n                        }\r\n                    });\r\n        div.className = 'hidden';\r\n        var p = document.createElement('p');\r\n        var texte = document.createTextNode('Votre demande a bien été prise en compte');\r\n        p.appendChild(texte);\r\n        document.body.querySelectorAll('div')[0].append(p);\r\n        document.querySelectorAll('div')[0].className = \"close\";\r\n        button.className = 'btn';\r\n        showP();\r\n    });\r\n\r\n    // Affichage de la balise \"p\", message de validation\r\n    function hiddenP(){\r\n        for(var i = 0; i<document.querySelectorAll('p').length; i++){\r\n            document.querySelectorAll('p')[i].className = \"text_off\";\r\n        }\r\n    }\r\n    function showP(){\r\n        for(var i = 0; i<document.querySelectorAll('p').length; i++){\r\n            document.querySelectorAll('p')[i].className = \"\";\r\n        }\r\n    }\r\n}\r\nmain();"]}